(()=>{"use strict";function e(e,t,n,a,d,s){return{title:e,description:t,date:n,priority:a,cheked:d,id:s,isFromToday:()=>{},isFromThisWeek:()=>{},isImportant:()=>{},isCompleted:()=>{}}}function t(e,t){const n=[];return{name:e,id:t,addTask:e=>{n.push(e)},getTasks:()=>n,deleteTask:e=>{const t=n.indexOf(e);e.splice(t,1)}}}const n=t("nuevo"),a=e("hola","si","ahora","1","no");n.addTask(a);const d=(e,t)=>{const n=document.getElementsByClassName("sections")[0],a=document.createElement("li"),d=document.createElement("a");d.innerText=e,d.setAttribute("href","#"),d.dataset.section=e,d.classList.add("section-link"),a.appendChild(d),a.classList.add("section"),a.addEventListener("click",(e=>{e.preventDefault(),t()})),n.appendChild(a)},s=(e,t)=>{const n=document.getElementsByClassName("projects")[0],a=document.createElement("li"),d=document.createElement("a");d.innerText=e.name,d.setAttribute("href","#"),a.appendChild(d),a.classList.add("project"),a.dataset.id=e.id,a.addEventListener("click",(n=>{n.preventDefault(),t(e.id)})),n.appendChild(a)},c=(e,t,n)=>{(e=>{const t=document.createElement("div");t.classList.add("section-conteiner");const n=document.createElement("ul");n.classList.add("sections"),t.appendChild(n),e.appendChild(t)})(e),((e,t)=>{const n=document.createElement("div");(e=>{const t=document.createElement("div");t.classList.add("projects-conteiner");const n=document.createElement("h2");n.innerText="Projects",n.classList.add("project-title"),t.appendChild(n);const a=document.createElement("button");a.classList.add("projects-add"),a.innerText="Add Project";const d=document.createElement("dialog");d.classList.add("project-dialog"),t.appendChild(d);const s=document.createElement("form"),c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","project"),c.setAttribute("name","Project");const o=document.createElement("button");o.classList.add("sumbit-project"),s.appendChild(c),d.appendChild(s),s.appendChild(o),t.appendChild(a),e.appendChild(t)})(n),(e=>{const t=document.createElement("ul");t.classList.add("projects"),e.appendChild(t)})(n),e.appendChild(n)})(e)},o=e=>{for(;e.firstChild;)e.removeChild(e.lastChild)},i=e=>{const t=document.getElementById("content");o(t),r(e,t)},r=(e,t)=>{const n=document.createElement("button");n.innerText="AddTask",n.classList.add("task-add");const a=document.createElement("div");a.classList.add("task"),a.appendChild(n),(e=>{const t=document.createElement("dialog");t.classList.add("task-dialog");const n=document.createElement("form"),a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","task-name"),a.setAttribute("name","task-name");const d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("id","task-description"),d.setAttribute("name","task-description");const s=document.createElement("input");s.setAttribute("type","date"),s.setAttribute("id","task-date"),s.setAttribute("name","task-date");const c=document.createElement("input");c.setAttribute("type","number"),c.setAttribute("id","task-priority"),c.setAttribute("name","task-priority");const o=document.createElement("input");o.setAttribute("type","checkbox"),o.setAttribute("id","task-check"),o.setAttribute("name","task-check");const i=document.createElement("button");i.classList.add("sumbit-task"),n.appendChild(a),n.appendChild(d),n.appendChild(s),n.appendChild(c),n.appendChild(o),t.appendChild(n),n.appendChild(i),e.appendChild(t)})(a),t.appendChild(a),e.forEach((e=>{const n=document.createElement("div");n.classList.add("task"),n.dataset.id=e.id,((e,t)=>{const{title:n,description:a,date:d,priority:s,cheked:c}=t,o=document.createElement("h3");o.classList.add("task-title"),o.innerText=n,e.appendChild(o)})(n,e),t.appendChild(n)}))},l=function(n){let a=[];const d=()=>Math.floor(1e6*Math.random()),s=e=>{const n=t(e,d());return a.push(n),n.id};return{createTask:(t,n,s,c,o,i)=>{const r=e(t,n,s,c,o,d());a.find((e=>e.id===i)).addTask(r)},createProject:s,updateTask:(e,t,n)=>{const d=a.indexOf(e);a[d]=t},deleteTask:(e,t)=>{const n=a.indexOf(t);a[n].deleteTask(e)},deleteProject:e=>{const t=a.indexOf(e);a.splice(t,1)},getProjects:()=>a,firstProject:()=>(a||s("My Project"),a[0]),getProjectTask:e=>a.find((t=>t.id===e)).getTasks(),getAllTask:()=>a.map((e=>e.getTasks())).reduce(((e,t)=>e.concat(t)))}}(),m=l.createProject("nuevo");l.createTask("tarea","1","1","1","1",m),function(e){const t=[{name:"All",handler:e=>!0},{name:"today",handler:e=>e.isFromToday()},{name:"this Week",handler:e=>e.isFromThisWeek()},{name:"Important",handler:e=>e.isImportant()},{name:"Completed",handler:e=>e.isCompleted()}],n=(a=e.getProjects(),{initialize:()=>{(e=>{const t=document.createElement("h1");t.innerText="TODO LIST",e.appendChild(t)})(document.getElementById("header"));const e=document.getElementById("sidebar");c(e);const t=document.getElementById("content");r((()=>{let e=[];return a.forEach((t=>{e=e.concat(t.getTasks())})),e})(),t)},createSection:d,createProject:s,renderContent:i,renderProjects:()=>{const e=document.getElementsByClassName("projects")[0];o(e)}});var a;let l=e.firstProject(),m=l.getTasks(),u=!1;n.initialize();const p=e=>{m=e(),h()};t.forEach((t=>{n.createSection(t.name,(()=>{p((()=>(u=!0,e.getAllTask().filter((e=>t.handler(e))))))}))}));const h=()=>{n.renderProjects(),e.getProjects().forEach((t=>{n.createProject(t,(t=>{p((()=>(u=!1,e.getProjectTask(t))))}))})),n.renderContent(m),document.getElementsByClassName("task-add")[0].addEventListener("click",k)},k=t=>{if(t.preventDefault(),u)return void alert("You Have to be in an Project to add a Task");const n=document.getElementsByClassName("task-dialog")[0];n.showModal(),document.getElementsByClassName("sumbit-task")[0].addEventListener("click",(()=>{const t=document.getElementById("task-name").value,a=document.getElementById("task-description").value,d=document.getElementById("task-date").value,s=document.getElementById("task-priority").value,c=document.getElementById("task-check").value;console.log("the section to render is"+l.id),e.createTask(c,d,a,t,s,l.id),n.close(),h()}))};document.getElementsByClassName("projects-add")[0].addEventListener("click",(t=>{t.preventDefault();const n=document.getElementsByClassName("project-dialog")[0];n.showModal(),document.getElementsByClassName("sumbit-project")[0].addEventListener("click",(()=>{const t=document.getElementById("project").value;e.createProject(t),n.close(),h()}))})),h()}(l)})();