(()=>{"use strict";function e(e,t,n,d,s,a){return{title:e,description:t,date:n,priority:d,cheked:s,id:a,isFromToday:()=>{},isFromThisWeek:()=>{},isImportant:()=>{},isCompleted:()=>{}}}function t(e,t){const n=[];return{name:e,id:t,addTask:e=>{n.push(e)},getTasks:()=>n,deleteTask:e=>{const t=n.indexOf(e);e.splice(t,1)}}}const n=t("nuevo"),d=e("hola","si","ahora","1","no");n.addTask(d);const s=(e,t)=>{const n=document.getElementsByClassName("sections")[0],d=document.createElement("li"),s=document.createElement("a");s.innerText=e,s.setAttribute("href","#"),s.dataset.section=e,s.classList.add("section-link"),d.appendChild(s),d.classList.add("section"),d.addEventListener("click",t),n.appendChild(d)},a=(e,t)=>{const n=document.getElementsByClassName("projects")[0],d=document.createElement("li"),s=document.createElement("a");s.innerText=e.name,s.setAttribute("href","#"),d.appendChild(s),d.classList.add("project"),d.dataset.id=e.id,d.addEventListener("click",(n=>{n.preventDefault(),t(e.id)})),n.appendChild(d)},c=(e,t,n)=>{((e,t)=>{const n=document.createElement("div");n.classList.add("section-conteiner");const d=document.createElement("ul");d.classList.add("sections"),n.appendChild(d),e.appendChild(n)})(e),((e,t)=>{const n=document.createElement("div");(e=>{const t=document.createElement("div");t.classList.add("projects-conteiner");const n=document.createElement("h2");n.innerText="Projects",n.classList.add("project-title"),t.appendChild(n);const d=document.createElement("button");d.classList.add("projects-add"),d.innerText="Add Project";const s=document.createElement("dialog");s.classList.add("project-dialog"),t.appendChild(s);const a=document.createElement("form"),c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","project"),c.setAttribute("name","Project");const o=document.createElement("button");o.classList.add("sumbit-project"),a.appendChild(c),s.appendChild(a),a.appendChild(o),t.appendChild(d),e.appendChild(t)})(n),((e,t)=>{const n=document.createElement("ul");n.classList.add("projects"),e.appendChild(n)})(n),e.appendChild(n)})(e)},o=e=>{for(;e.firstChild;)e.removeChild(e.lastChild)},i=e=>{const t=document.getElementById("content");o(t),r(e,t)},r=(e,t)=>{const n=document.createElement("button");n.innerText="AddTask",n.classList.add("task-add");const d=document.createElement("div");d.classList.add("task"),d.appendChild(n),(e=>{const t=document.createElement("dialog");t.classList.add("task-dialog");const n=document.createElement("form"),d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("id","task-name"),d.setAttribute("name","task-name");const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("id","task-description"),s.setAttribute("name","task-description");const a=document.createElement("input");a.setAttribute("type","date"),a.setAttribute("id","task-date"),a.setAttribute("name","task-date");const c=document.createElement("input");c.setAttribute("type","number"),c.setAttribute("id","task-priority"),c.setAttribute("name","task-priority");const o=document.createElement("input");o.setAttribute("type","checkbox"),o.setAttribute("id","task-check"),o.setAttribute("name","task-check");const i=document.createElement("button");i.classList.add("sumbit-task"),n.appendChild(d),n.appendChild(s),n.appendChild(a),n.appendChild(c),n.appendChild(o),t.appendChild(n),n.appendChild(i),e.appendChild(t)})(d),t.appendChild(d),e.forEach((e=>{const n=document.createElement("div");n.classList.add("task"),n.dataset.id=e.id,((e,t)=>{const{title:n,description:d,date:s,priority:a,cheked:c}=t,o=document.createElement("h3");o.classList.add("task-title"),o.innerText=n,e.appendChild(o)})(n,e),t.appendChild(n)}))},l=function(n){let d=[];const s=()=>Math.floor(1e6*Math.random()),a=e=>{const n=t(e,s());return d.push(n),n.id};return{createTask:(t,n,a,c,o,i)=>{const r=e(t,n,a,c,o,s());d.find((e=>e.id===i)).addTask(r)},createProject:a,updateTask:(e,t,n)=>{const s=d.indexOf(e);d[s]=t},deleteTask:(e,t)=>{const n=d.indexOf(t);d[n].deleteTask(e)},deleteProject:e=>{const t=d.indexOf(e);d.splice(t,1)},getProjects:()=>d,firstProject:()=>(d||a("My Project"),d[0]),getProjectTask:e=>d.find((t=>t.id===e)).getTasks()}}(),m=l.createProject("nuevo");l.createTask("tarea","1","1","1","1",m),function(e){const t=[{name:"All",handler:()=>!0},{name:"today",handler:e=>e.isFromToday()},{name:"this Week",handler:e=>e.isFromThisWeek()},{name:"Important",handler:e=>e.isImportant()},{name:"Completed",handler:e=>e.isCompleted()}],n=(d=e.getProjects(),{initialize:()=>{(e=>{const t=document.createElement("h1");t.innerText="TODO LIST",e.appendChild(t)})(document.getElementById("header"));const e=document.getElementById("sidebar");c(e);const t=document.getElementById("content");r((()=>{let e=[];return d.forEach((t=>{e=e.concat(t.getTasks())})),e})(),t)},createSection:s,createProject:a,renderContent:i,renderProjects:()=>{const e=document.getElementsByClassName("projects")[0];o(e)}});var d;let l=e.firstProject(),m=l.getTasks();n.initialize();const u=e=>{m=e(),p()};t.forEach((e=>{n.createSection(e.name,(()=>{u((()=>{e.handler()}))}))}));const p=()=>{n.renderProjects(),e.getProjects().forEach((t=>{n.createProject(t,(t=>{u((()=>e.getProjectTask(t)))}))})),n.renderContent(m),document.getElementsByClassName("task-add")[0].addEventListener("click",h)},h=t=>{t.preventDefault();const n=document.getElementsByClassName("task-dialog")[0];n.showModal(),document.getElementsByClassName("sumbit-task")[0].addEventListener("click",(()=>{const t=document.getElementById("task-name").value,d=document.getElementById("task-description").value,s=document.getElementById("task-date").value,a=document.getElementById("task-priority").value,c=document.getElementById("task-check").value;console.log("the section to render is"+l.id),e.createTask(c,s,d,t,a,l.id),n.close(),p()}))};document.getElementsByClassName("projects-add")[0].addEventListener("click",(t=>{t.preventDefault();const n=document.getElementsByClassName("project-dialog")[0];n.showModal(),document.getElementsByClassName("sumbit-project")[0].addEventListener("click",(()=>{const t=document.getElementById("project").value;e.createProject(t),n.close(),p()}))})),p()}(l)})();